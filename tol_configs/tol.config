params {
  config_profile_description = 'The Wellcome Sanger Institute Tree of Life HPC cluster profile'
  config_profile_contact = 'Priyanka Surana (@priyanka-surana)'
  config_profile_url = 'https://www.sanger.ac.uk'
}

singularity {
  enabled = true
  cacheDir   = "${baseDir}/singularity"
  runOptions = '--bind /lustre --bind /nfs --no-home'
}

process{
  executor = 'lsf'
  // queue = { task.time > 12.h ? 'normal' : 'long' }
  queue = 'long' 
  errorStrategy = { task.attempt <= 5 ? "retry" : "finish" }
  process.maxRetries = 5
  withLabel:process_long {
    queue = 'long'
  }
}

executor{
  name = 'lsf'
  perJobMemLimit = true
  poolSize = 4
  submitRateLimit = '5 sec'
  killBatchSize = 50
}

params {
  max_memory = 128.GB
  max_cpus = 64
  max_time = 48.h
}
